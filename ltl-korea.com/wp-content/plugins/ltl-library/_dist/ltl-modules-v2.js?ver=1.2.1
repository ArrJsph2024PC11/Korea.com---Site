(()=>{var e={1172:()=>{},2006:()=>{},1832:()=>{}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,r),n.exports}(()=>{"use strict";r(1172);var e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"newsletter"},[t("form",{staticClass:"newsletter__form",on:{submit:function(t){return t.preventDefault(),e.onFirstSubmit.apply(null,arguments)}}},[t("h4",[e._v(e._s(e.dataTitle))]),e._v(" "),t("p",[e._v("\n      "+e._s(e.dataDescription)+"\n    ")]),e._v(" "),t("div",{staticClass:"newsletter__fieldset"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:e.labels.first_name,autocomplete:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),e.errors.name?t("span",[e._v("\n          "+e._s(e.errors.name)+"\n        ")]):e._e()]),e._v(" "),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",placeholder:e.labels.email,autocomplete:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),e.errors.email?t("span",[e._v("\n          "+e._s(e.errors.email)+"\n        ")]):e._e()])]),e._v(" "),t("button",{staticClass:"newsletter__submit",class:{"is-loading":e.isLoading},attrs:{type:"submit"}},[e._v("\n      "+e._s(e.labels.subscribe)+"\n    ")])]),e._v(" "),t("figure",{staticClass:"newsletter__mascot"})])};e._withStripped=!0;class t{constructor(e,t={}){this.baseURL=e||"",this.headers={"Content-Type":"application/json",...t}}async get(e){try{const t=await fetch(this.baseURL+e,{method:"GET",headers:this.headers});return t.ok?t.json():Promise.reject(await t.json())}catch(e){return console.log(e),Promise.reject(e)}}async getFromSession(e){const t=sessionStorage.getItem(e);if(t)return JSON.parse(t);try{const t=await this.get(e);return sessionStorage.setItem(e,JSON.stringify(t)),t}catch(e){return Promise.reject(e)}}async getFromLocal(e){const t=localStorage.getItem(e);if(t)return JSON.parse(t);try{const t=await this.get(e);return localStorage.setItem(e,JSON.stringify(t)),t}catch(e){return Promise.reject(e)}}async post(e,t){let r=null;r=t instanceof Element?new FormData(t):JSON.stringify(t);try{const t=await fetch(this.baseURL+e,{method:"POST",body:r,headers:this.headers});return t.ok?t.json():Promise.reject(await t.json())}catch(e){return console.log(e),Promise.reject(e)}}async delete(e){try{return await fetch(this.url+e,{method:"DELETE"})}catch(e){return console.log(e),Promise.reject(e)}}}const s={},{nonce:o,root:n,ltlRoot:a}=window.myApiSettings;o&&(s["X-WP-Nonce"]=o),new t,new t(n,s);const i=new t(a),l={props:{dataFormId:{type:String,required:!0},dataTitle:{type:String,default:"NEWSLETTER"},dataDescription:{type:String,default:"Get free awesome language goodness by subscribing to our Newsletter."},dataLabels:{type:String,default:""}},data(){const e=document.querySelector(".newsletter-popup");return{name:"",email:"",errors:{},isLoading:!1,items:!1,labels:JSON.parse(this.$props.dataLabels),locale:document.querySelector("html").getAttribute("lang").replace("-","_"),popup:e,popupForm:e.querySelector("form"),popupItems:e.querySelector("ul"),popupNameField:e.querySelector('[name="fields[name]"]'),popupEmailField:e.querySelector('[name="fields[email]"]')}},methods:{async onFirstSubmit(){this.isLoading=!0,this.errors={};try{if(this.name||(this.errors.name=this.labels.name_error),this.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)||(this.errors.email=this.labels.email_error),Object.keys(this.errors).length>0)throw new Error(this.labels.has_error);this.items=await i.get(`/newsletter/${this.locale}`),this.openPopup()}catch(e){console.log(e.message)}this.isLoading=!1},openPopup(){this.popupForm.setAttribute("action",`https://static.mailerlite.com/webforms/submit/${this.$props.dataFormId}`),this.popupNameField.value=this.name,this.popupEmailField.value=this.email;const e=[];this.items.forEach((t=>{const r=t.thumbnail?`<img src="${t.thumbnail}"/>`:"";e.push(`<li><label>\n          <input type="checkbox" name="fields[interest][]" value="${t.title_en}">\n          ${r}\n          <span>${t.title}</span>\n        </label></li>`)})),this.popupItems.innerHTML=e.join(" "),this.popup.classList.add("is-open")}}};r(1832);var c=function(e,t,r,s,o,n){var a,i="function"==typeof e?e.options:e;if(t&&(i.render=t,i.staticRenderFns=[],i._compiled=!0),n&&(i._scopeId="data-v-"+n),a)if(i.functional){i._injectStyles=a;var l=i.render;i.render=function(e,t){return a.call(t),l(e,t)}}else{var c=i.beforeCreate;i.beforeCreate=c?[].concat(c,a):[a]}return{exports:e,options:i}}(l,e,0,0,0,"29248d2e");const p=c.exports;r(2006);document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".newsletter-form-wrapper").forEach((e=>{new Vue({el:e,components:{"newsletter-form":p}})})),function(){const e=document.querySelector(".newsletter-popup");if(!e)return;const t=e.querySelector("form"),r=e.querySelector(".newsletter-popup__close"),s=e.querySelector('[href="#skip"]');function o(t){t.preventDefault(),e.classList.remove("is-open")}e.addEventListener("click",o),t.addEventListener("click",(e=>e.stopPropagation())),r.addEventListener("click",o),s.addEventListener("click",(function(){e.querySelectorAll('[type="checkbox"]').forEach((e=>{e.checked=!1})),t.submit()}))}()}))})()})();